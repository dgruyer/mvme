set(PROJECT_NAME        "@CMAKE_PROJECT_NAME@")
set(PACKAGE_ARCH_STRING "@PACKAGE_ARCH_STRING@")
set(PACKAGE_VERSION     "@GIT_VERSION_SHORT@")
set(SOURCE_DIR          "@CMAKE_SOURCE_DIR@")
set(GIT_BRANCH          "@GIT_BRANCH@")

set(CPACK_PACKAGE_VERSION "${PACKAGE_VERSION}")
set(CPACK_PACKAGE_FILE_NAME "${PROJECT_NAME}-${PACKAGE_VERSION}-${CMAKE_SYSTEM_NAME}-${PACKAGE_ARCH_STRING}")

if (GIT_BRANCH AND NOT "${GIT_BRANCH}" STREQUAL "master")
    string(REPLACE "/" "_" GIT_BRANCH ${GIT_BRANCH})

    set(CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_FILE_NAME}-${GIT_BRANCH}")
endif()

set(CPACK_PACKAGE_VENDOR "mesytec")
#set(CPACK_PACKAGE_EXECUTABLES "mvme;mvme")
set(CPACK_PACKAGE_INSTALL_DIRECTORY "mvme")

if (WIN32)
    set(CPACK_OUTPUT_FILE_PREFIX "c:\\src\\mvme-packages")
else()
    set(CPACK_OUTPUT_FILE_PREFIX "$ENV{HOME}/src/mvme-packages")
endif()

set(CPACK_RESOURCE_FILE_LICENSE "${SOURCE_DIR}/LICENSE-SHORT.TXT")
set(CPACK_STRIP_FILES TRUE)
