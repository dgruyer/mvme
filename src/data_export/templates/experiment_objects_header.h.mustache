R"(#ifndef __MVME_ROOT_EXPORT_GUARD_{{header_guard}}__
#define __MVME_ROOT_EXPORT_GUARD_{{header_guard}}__

// Contains declarations of the Experiment, Event and Module base classes
#include <mvme_root_export_objects.h>

// Modules
{{#vme_modules}}
struct {{struct_name}}: public Module
{
    {{struct_name}}(): Module("{{name}}", "{{title}}") {}

{{#data_members}}
    {{type}} {{name}}[{{size}}];
{{/data_members}}

    ClassDef({{struct_name}}, 1);
};
{{/vme_modules}}

// Event
{{#vme_events}}
struct {{struct_name}}: public Event
{
    {{struct_name}}(): Event("{{name}}", "{{title}}")
    {
    {{#modules}}
        AddModule(&{{var_name}});
    {{/modules}}
    }

{{#modules}}
    {{struct_name}} {{var_name}};
{{/modules}}

    ClassDef({{struct_name}}, 1);
};
{{/vme_events}}

// Experiment
struct {{exp_struct_name}}: public Experiment
{
    {{exp_struct_name}}(): Experiment("{{exp_name}}", "{{exp_title}}")
    {
    {{#vme_events}}
        AddEvent(&{{var_name}});
    {{/vme_events}}
    }

{{#vme_events}}
    {{struct_name}} {{var_name}};
{{/vme_events}}

    ClassDef({{exp_struct_name}}, 1);
};

#endif /* __MVME_ROOT_EXPORT_GUARD_{{header_guard}}__ */
{{!
vim:ft=cpp
}})"
